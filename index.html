<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, 
  maximum-scale=1.0, user-scalable=no" />
  <script type="text/javascript">

    window.addEventListener( "devicemotion", function( event ){
      var x = event.accelerationIncludingGravity.x;
      var y = event.accelerationIncludingGravity.y;
      var z = event.accelerationIncludingGravity.z;

      var result1 = document.getElementById( "result_acc" );
      result1.innerHTML = "重力加速度<br />" +
        "X：" + x.toFixed(2) +"(m/s^2)<br />" +
        "Y：" + y.toFixed(2) +"(m/s^2)<br />" + 
        "Z：" + z.toFixed(2) +"(m/s^2)<br />";
    });


    window.addEventListener( "deviceorientation", function( event ) {
      var alpha = event.alpha;
      var beta = event.beta;
      var gamma = event.gamma;

      var result2 = document.getElementById( "result_gyro" );
      result2.innerHTML = "ジャイロセンサー<br />" +
        "alpha：" + alpha.toFixed(2) +"°<br />" +
        "beta ：" + beta.toFixed(2)  +"°<br />" + 
        "gamma：" + gamma.toFixed(2) +"°<br />";
    }, false);
      
                  if ( accG-x > 9 || accG-y > 9 || accG-x < -9 || accG-y < -9) {
                alert("鍵が掛かっています。");
                //e.stopPropagation(); //一回のみ
            }   
});

  </script>
</head>

    
 <script>
       // GPS センサの値が変化したら何らか実行する geolocation.watchPosition メソッド
        navigator.geolocation.watchPosition( (position) => {
            var lat  = position.coords.latitude;            // 緯度を取得
            var lng  = position.coords.longitude;           // 経度を取得
            var accu = position.coords.accuracy;            // 緯度・経度の精度を取得
            displayData(lat, lng, accu);                    // displayData 関数を実行
            alert("移動しました。");
        }, (error) => {                                     // エラー処理（今回は特に何もしない）
        }, {
            enableHighAccuracy: true                        // 高精度で測定するオプション
        });
        
        // データを表示する displayData 関数
        function displayData(lat, lng, accu) {
            var txt = document.getElementById("txt1");       // データを表示するdiv要素の取得
            txt.innerHTML = "緯度: " + lat  +"<br>"+"経度: "+ lng + "<br>"  // データ表示
                        + "精度: "       + accu;
        }
    </script>




</body>

<body>
    <h2>いずれかの数字が9になるまで傾けてください</h2>

    <!--    <p>下記の位置情報を取得することができました。</p>-->

    <dl id/="result"> </dl> <div class="map-wrapper">
        <div id="map-canvas"></div>
        </div>


        <HR /style="margin: 3em 0 ;">

        <!--     JavaScriptの読み込み -->
        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB7Pxqp7Asgi6D4eOtkCxnir5xPiIwY3EE"></script>
        <script src="watch-position.js"></script>
</body>

</html>

<!--
XAMPP で Apache を Start させてください<br>
LANを「パソコンとスマホ」同じものを使う。＼_(・ω・`)ココ重要！-->
